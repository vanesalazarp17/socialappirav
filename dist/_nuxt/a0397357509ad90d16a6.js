(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{263:function(e,t,n){var content=n(275);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("10e0ccb2",content,!0,{sourceMap:!1})},274:function(e,t,n){"use strict";var r=n(263);n.n(r).a},275:function(e,t,n){(e.exports=n(14)(!1)).push([e.i,"label{margin-right:.5em;padding-top:.2em;text-align:left;font-weight:700}",""])},280:function(e,t,n){"use strict";n.r(t);n(28),n(55);var r=n(11),o=n(86),l=n(79),c={data:function(){return{loading:!1,url:""}},computed:Object(o.d)(["user"]),methods:{agregar:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.$refs.adjunto.files,this.loading=!0,n=t[0],console.log(this.$refs.subject.value),console.log(this.$refs.anyo.value),console.log(n.name),console.log("".concat(this.user.user.uid)),!n){e.next=21;break}return e.next=11,l.b.storage().ref("".concat(n.name)).put(n);case 11:return r=e.sent,e.next=14,r.ref.getDownloadURL();case 14:return o=e.sent,console.log("archivo disponible en ",o),this.downloadUrl=o,e.next=19,l.b.firestore().collection("notes").add({subject:this.$refs.subject.value,anyo:this.$refs.anyo.value,fichero:n.name,url:o}).then(function(e){console.log("Document written with ID: ",e.id)});case 19:e.next=22;break;case 21:console.log("falta el archivo");case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error(e.t0);case 27:this.loading=!1;case 28:case"end":return e.stop()}},e,this,[[0,24]])}));return function(){return e.apply(this,arguments)}}()}},d=(n(274),n(46)),component=Object(d.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-group col-sm-12"},[e.user?n("div",{staticClass:"contenido"},[e._v("\n    Usuario identificado:\n    "),n("pre",{ref:"username",domProps:{textContent:e._s(""+e.user.user.displayName)}}),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Rellene el año de la asignatura:")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{ref:"anyo",staticClass:"input",attrs:{name:"año",placeholder:"2019"}})])]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Nombre de la asignatura:")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{ref:"subject",staticClass:"input",attrs:{name:"asignatura",placeholder:"IRAV"}})])]),e._v(" "),e._m(0),e._v(" "),n("p",[n("input",{ref:"adjunto",staticClass:"form-control",attrs:{id:"archivo",type:"file",disabled:e.loading,"data-validate":"Adjuntar"}})]),e._v(" "),n("button",{attrs:{disabled:e.loading},on:{click:e.agregar}},[e._v("Subir Archivo")]),e._v(" "),e.url?n("p",[e._v("\n      Archivo disponible en:\n      "),n("a",{attrs:{href:e.url}},[e._v("Link")])]):e._e()]):n("div",[e._v("\n    Not logged yet, Please "),n("nuxt-link",{attrs:{to:"/login"}},[e._v("Login ")])],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("label",[this._v("Adjunte el fichero a subir")])])}],!1,null,null,null);t.default=component.exports}}]);